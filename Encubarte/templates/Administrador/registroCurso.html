{%extends "base.html"%}
{% block titulo %}Registro Curso{% endblock %}
{% block scripts %}
<script type="text/javascript">
	function cambiarDisplay(id) {
		if (!document.getElementById) return false;

		fila = document.getElementById(id);
		if (fila.style.display != "none") 
		{
			fila.style.display = "none"; //ocultar fila 
		} 
		else 
		{
			fila.style.display = ""; //mostrar fila 
  		}
	}
</script>
{% endblock %}
{% block contenido %}
	{%if errorProfesor or errorNumeroGrupo or errorCursoYaExiste %}
	<div class="container">
		<h3>Corrige los siguientes errores para continuar:</h3>
		<p class="text-error">
			{% if errorProfesor %}
				El profesor no existe en la base de datos o no es valido.<br>
			{% endif %}
			{% if errorNumeroGrupo %}
				El numero del grupo no es valido.<br>
			{% endif %}
			{% if errorCursoYaExiste %}
				Este curso ya esta asignado a este profesor.<br>
			{% endif %}
		</p>
	</div>
	{% endif %}
	{% if operationSuccess %}
		<div class="container">
			<p class="text-info">Operacion completada con exito.</p>
		</div>
	{% endif %}
	<div class="container">
	<div class="row">
		<div class="col-md-3">
			<form method="POST" action="/registroCurso/" name="registroCurso">
				{% csrf_token %}
				<div class="container">
				<h3>Ingresa los datos del curso</hs3>
					<table class="table-bordered table-striped table-hover">
						<tbody>
						    <tr>
				        		<td><label>Nombre:</label></td>
				        		<td><input type="text" name="nombreCurso" required="true" value="{{nombreCurso}}"/>*</td>
				   			</tr>
						    <tr>
						        <td><label>Profesor:</label></td>
						        <td>
						        	<select name="profesor" required="true" value="{{profesor}}">
						        		{% for p in profesores%}
						        			<option value="{{p.user.username}}">{{p}}</option>
						        		{% endfor %}
						        	</select>
						    	</td>
						    </tr>
						    <tr>
						        <td><label>Numero Grupo:</label></td>
						        <td>
						        	<select name="numeroGrupo" required="true" value="{{numeroGrupo}}">
						        		{% for p in numerosGrupos%}
						        			<option>{{p}}</option>
						        		{% endfor %}
						        	</select>
						    	</td>
						    </tr>
				    		<tr>
				        		<td><label>Es este un curso cerrado?:</label></td>
				        		<td><input type="checkbox" name="esCursoCerrado" value="{{esCursoCerrado}}"/></td>
				    		</tr>
						    <tr>
						        <td><input type="submit" class="btn" value="Registrar Curso" name="registrar"/>
						    </tr>
						</tbody>
					</table>
				</div>
			</form>
		</div>
		<div class="col-md-2">
			<table align="center" >
			{% for c in cursos%}
				<tr>
			        <td onclick="cambiarDisplay('{{c.id}}')">{{c}}</td>
			    </tr>
			    <tr id="{{c.id}}" style="display:none">
					<td> 
					<form action="#"  method="get">
						<input type="hidden" name="id" value="{{c.id}}">
 						<input type="submit" onclick="return confirm('Esta seguro que desea eliminar este curso?')" class="btn" value="Eliminar Curso" name="eliminarCurso">
					</form>
					</td>
				</tr>
			{% endfor %}
			</table>
		</div>
	</div>
	</div>
	
{% endblock %}